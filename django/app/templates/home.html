{% extends "base.html" %}
{% load staticfiles %}

{% block content %}

<script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.5.3/d3.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/topojson/1.6.9/topojson.min.js"></script>
<script src="{% static "js/datamaps.world.min.js" %}"></script>

<script src="https://d3js.org/d3-zoom.v1.min.js"></script>

<style type="text/css">
    #map {
        width: 100%;
        height: calc(100% - 5px);
        margin: 0 !important;
        padding: 0 !important;
        display: inline-block;
    }
    #paper-infos {
        position: fixed;
        bottom: 0px;
        background-color: rgb(55,55,55);
        padding: 10px;
        text-align: center;
        color: white;
        width: 100%;
    }
    #paper-infos > span {
        color: #FFFFFF;
    }
    .tag {
        padding: 1px 6px;
        background-color: #F44336; 
        margin-left: 3px;
        border-radius: 2px;
    }
</style>
<div id="map">
</div>
<div id="paper-infos">
    <span>Les fourmis de Katmandou</span>
    <br>
    <span class="tag">fourmis</span><span class="tag">katmandou</span><span class="tag">népal</span>
</div>
<script>
    var map = new Datamap({
        element: document.getElementById('map'),
        responsive: true,
        fills: {
            'prev': '#FF4413', //FFA100
            'curr': '#DC15F1', //B201C4
            'next': '#3338F3', //01B3BB
            defaultFill: "#D2EDD2" // D6F2D6
        },
    });
    window.addEventListener('resize', function() {
        map.resize();
    });

    var bombs = [{
        radius: 8,
        location: 'Université Libre de Bruxelles',
        fillKey: 'prev',
        borderWidth: 0.5,
        paper: "Les fourmis c'est vraiment cool.",
        date: '1953-08-12',
        latitude: 50.813102, 
        longitude: 4.383510,
        fillOpacity: 1.0
      },
      {
        radius: 8,
        location: 'Université de Toronto',
        fillKey: 'next',
        borderWidth: 0.5,
        paper: "Un four et de la mie.",
        date: '1953-08-12',
        latitude: 43.662220,
        longitude: -79.395141,
        fillOpacity: 1.0
      },
      {
        radius: 8,
        location: 'Kathmandu University School of Management',
        fillKey: 'curr',
        borderWidth: 0.5,
        paper: "Les fourmis de Katmandou.",
        date: '1953-08-12',
        latitude: 27.669768, 
        longitude: 85.333947,
        fillOpacity: 1.0
      },
    ];
    map.bubbles(bombs, {
        popupTemplate: function (geo, data) {
                return ['<div class="hoverinfo">' +  data.paper + '<br>',
                data.date + "<br>" + data.location,
                '</div>'].join('');
        }
    });
</script>

{% endblock content %}